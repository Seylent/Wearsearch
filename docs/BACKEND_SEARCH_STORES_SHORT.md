# üîç –ü–æ—à—É–∫ –º–∞–≥–∞–∑–∏–Ω—ñ–≤ - –ö–æ—Ä–æ—Ç–∫–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è Backend

## –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ –Ω–∞ Frontend

‚úÖ **–î–æ–¥–∞–Ω–æ –ø–æ—à—É–∫ –º–∞–≥–∞–∑–∏–Ω—ñ–≤ —É navbar –ø–æ—Ä—É—á –∑ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏**

–ü—Ä–∏ –≤–≤–µ–¥–µ–Ω–Ω—ñ –Ω–∞–∑–≤–∏ –º–∞–≥–∞–∑–∏–Ω—É   –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å:
- –ú–∞–≥–∞–∑–∏–Ω–∏ –∑ –±–µ–π–¥–∂–µ–º "STORE" (–º–∞–∫—Å–∏–º—É–º 3)
- –ü—Ä–æ–¥—É–∫—Ç–∏ (–º–∞–∫—Å–∏–º—É–º 5)

–ü—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –º–∞–≥–∞–∑–∏–Ω ‚Üí –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ `/products?store_id={id}`

---

## –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ –Ω–∞ Backend

### ‚ö° –ú—ñ–Ω—ñ–º—É–º (–ü—Ä–∞—Ü—é—î –∑–∞—Ä–∞–∑ –ë–ï–ó –ó–ú–Ü–ù)

Frontend —Ñ—ñ–ª—å—Ç—Ä—É—î –º–∞–≥–∞–∑–∏–Ω–∏ –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ —ñ—Å–Ω—É—é—á–∏–π endpoint:
```
GET /stores
```

**–ù—ñ—á–æ–≥–æ –Ω–µ —Ç—Ä–µ–±–∞ —Ä–æ–±–∏—Ç–∏** - –≤—Å–µ –≤–∂–µ –ø—Ä–∞—Ü—é—î! 

---

### üöÄ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

–î–æ–¥–∞–π –ø–∞—Ä–∞–º–µ—Ç—Ä `search` –¥–æ endpoint `/stores`:

```python
@app.get("/stores")
async def get_stores(
    search: Optional[str] = None,  # üëà –î–û–î–ê–ô –¶–ï
    limit: int = 10,
    db: Session = Depends(get_db)
):
    query = db.query(Store)
    
    # –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ –Ω–∞–∑–≤—ñ
    if search:
        search_pattern = f"%{search.lower()}%"
        query = query.filter(
            func.lower(Store.name).like(search_pattern)
        )
    
    # –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (recommended —Å–ø–æ—á–∞—Ç–∫—É)
    query = query.order_by(
        Store.is_recommended.desc(),
        Store.name.asc()
    )
    
    stores = query.limit(limit).all()
    return stores
```

**–ó–∞–ø–∏—Ç:**
```bash
GET /stores?search=zara&limit=5
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
[
  {
    "id": "1",
    "name": "Zara Official Store",
    "logo_url": "https://...",
    "is_recommended": true,
    "product_count": 150
  }
]
```

---

## ‚úÖ –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è

–ú–∞–≥–∞–∑–∏–Ω –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ `product_count`:

```python
# –í–∞—Ä—ñ–∞–Ω—Ç 1: Property –≤ –º–æ–¥–µ–ª—ñ
class Store(Base):
    @property
    def product_count(self):
        return len(self.products)

# –í–∞—Ä—ñ–∞–Ω—Ç 2: SQL join
stores = db.query(
    Store,
    func.count(ProductStore.product_id).label('product_count')
).outerjoin(ProductStore).group_by(Store.id).all()
```

---

## üß™ –¢–µ—Å—Ç–∏

```bash
# –ü–æ—à—É–∫ –ø—Ä–∞—Ü—é—î
curl "http://localhost:8000/stores?search=zara"

# –ë–µ–∑ –ø–æ—à—É–∫—É –ø–æ–≤–µ—Ä—Ç–∞—î –≤—Å–µ
curl "http://localhost:8000/stores"

# Limit –ø—Ä–∞—Ü—é—î
curl "http://localhost:8000/stores?limit=3"
```

---

## üìä –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏

1. **–ú—ñ–Ω—ñ–º—É–º:** –ù—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏—Ç–∏ (–ø—Ä–∞—Ü—é—î –∑–∞—Ä–∞–∑)
2. **–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ:** –î–æ–¥–∞—Ç–∏ `search` –ø–∞—Ä–∞–º–µ—Ç—Ä (30-60 —Ö–≤)
3. **–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ:** Fuzzy search, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ—Å—Ç—å (–º–∞–π–±—É—Ç–Ω—î)

---

## üí¨ –ü–∏—Ç–∞–Ω–Ω—è?

**Frontend –≥–æ—Ç–æ–≤–∏–π:** –í—Å—ñ –∑–º—ñ–Ω–∏ –∑—Ä–æ–±–ª–µ–Ω—ñ, –ø—Ä–∞—Ü—é—î –∑ –ø–æ—Ç–æ—á–Ω–∏–º API

**–ß–∞—Å:** 30-60 —Ö–≤–∏–ª–∏–Ω –¥–ª—è –±–∞–∑–æ–≤–æ—ó –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

**–î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:** `docs/SEARCH_STORES_FEATURE.md`

---

‚úÖ –í—Å–µ –ø—Ä–∞—Ü—é—î –∑–∞—Ä–∞–∑!  
üöÄ –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞, –∞–ª–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞
