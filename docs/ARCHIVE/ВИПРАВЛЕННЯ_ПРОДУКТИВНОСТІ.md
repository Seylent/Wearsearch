# üöÄ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ!

## üêõ –ü—Ä–æ–±–ª–µ–º–∞ —è–∫—É —Ç–∏ –ø–æ–º—ñ—Ç–∏–≤

**–ü—ñ–¥–≤–∏—Å–∞–Ω–Ω—è —Å–∞–π—Ç—É** –±—É–ª–æ –≤–∏–∫–ª–∏–∫–∞–Ω–æ —Ç–∏–º, —â–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `StoreRating` –≤–∏–∫–ª–∏–∫–∞–≤ `/api/auth/me` **–ø—Ä–∏ –∫–æ–∂–Ω—ñ–π –∑–º—ñ–Ω—ñ** —Ç–æ–≤–∞—Ä—É –∞–±–æ –º–∞–≥–∞–∑–∏–Ω—É.

### –ü—Ä–∏–∫–ª–∞–¥:
```
–°—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ 10 —Ç–æ–≤–∞—Ä–∞–º–∏, –∫–æ–∂–µ–Ω –º–∞—î 2 –º–∞–≥–∞–∑–∏–Ω–∏ = 20 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ StoreRating
–†–µ–∑—É–ª—å—Ç–∞—Ç: 20 –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ /api/auth/me –ù–ê –ö–û–ñ–ù–Ü–ô –°–¢–û–†–Ü–ù–¶–Ü! üî•

–Ø–∫—â–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—à –Ω–∞ —ñ–Ω—à—É —Å—Ç–æ—Ä—ñ–Ω–∫—É ‚Üí –©–µ 20 –∑–∞–ø–∏—Ç—ñ–≤
–Ø–∫—â–æ –∑–º—ñ–Ω—é—î—Ç—å—Å—è —Ñ—ñ–ª—å—Ç—Ä ‚Üí –©–µ 20 –∑–∞–ø–∏—Ç—ñ–≤

–ó–∞–≥–∞–ª–æ–º: –°–û–¢–ù–Ü –ó–ê–ü–ò–¢–Ü–í!
```

---

## ‚úÖ –©–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **StoreRating –ö–æ–º–ø–æ–Ω–µ–Ω—Ç** (–ì–æ–ª–æ–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞)

**–ë—É–ª–æ:**
```javascript
// –ü–û–ì–ê–ù–ò–ô –ö–û–î - –∑–∞–ø–∏—Ç –ø—Ä–∏ –∫–æ–∂–Ω—ñ–π –∑–º—ñ–Ω—ñ props!
useEffect(() => {
  checkAuthAndLoadUserRating(); // –í–∏–∫–ª–∏–∫–∞—î /me
}, [storeId, productId]); // –ó–º—ñ–Ω—é—î—Ç—å—Å—è –ü–û–°–¢–Ü–ô–ù–û!
```

**–°—Ç–∞–ª–æ:**
```javascript
// –ì–ê–†–ù–ò–ô –ö–û–î - –∑–∞–ø–∏—Ç —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑
useEffect(() => {
  checkAuthOnce(); // –í–∏–∫–ª–∏–∫–∞—î /me —Ç—ñ–ª—å–∫–∏ —Ä–∞–∑
}, []); // –ü—É—Å—Ç–∏–π –º–∞—Å–∏–≤ = –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ

// –û–∫—Ä–µ–º–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Ä–µ–π—Ç–∏–Ω–≥
useEffect(() => {
  if (userId && productId) {
    loadUserRating(userId); // –ë–ï–ó –∑–∞–ø–∏—Ç—É /me
  }
}, [productId, userId]);
```

**–î–æ–¥–∞–Ω–æ:**
- ‚úÖ –ö–µ—à—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ `localStorage`
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–µ—à—É –ø–µ—Ä–µ–¥ API –∑–∞–ø–∏—Ç–æ–º
- ‚úÖ –û–¥–∏–Ω –∑–∞–ø–∏—Ç `/me` –∑–∞–º—ñ—Å—Ç—å –¥–µ—Å—è—Ç–∫—ñ–≤

### 2. **Admin –ü–∞–Ω–µ–ª—å**

**–î–æ–¥–∞–Ω–æ –∫–µ—à—É–≤–∞–Ω–Ω—è:**
```javascript
// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∫–µ—à –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Ç–æ–º
const cachedUser = localStorage.getItem('user');
if (cachedUser) {
  const userData = JSON.parse(cachedUser);
  return; // –ù–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ —Ä–æ–±–∏—Ç–∏ –∑–∞–ø–∏—Ç!
}

// –¢—ñ–ª—å–∫–∏ —è–∫—â–æ –∫–µ—à—É –Ω–µ–º–∞—î
const response = await fetch('/api/auth/me');
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
```
–í—ñ–¥–∫—Ä–∏–≤ —Å—Ç–æ—Ä—ñ–Ω–∫—É —Ç–æ–≤–∞—Ä—É:
‚Üí 20 –∑–∞–ø–∏—Ç—ñ–≤ /me
‚Üí –ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä: üî¥üî¥üî¥üî¥üî¥
‚Üí –°–∞–π—Ç –ø—ñ–¥–≤–∏—Å–∞—î
```

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
```
–í—ñ–¥–∫—Ä–∏–≤ —Å—Ç–æ—Ä—ñ–Ω–∫—É —Ç–æ–≤–∞—Ä—É:
‚Üí 1 –∑–∞–ø–∏—Ç /me (—Ä–µ—à—Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –∫–µ—à)
‚Üí –ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä: üü¢
‚Üí –°–∞–π—Ç —à–≤–∏–¥–∫–∏–π!
```

**–ó–º–µ–Ω—à–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤:** ~95%! üéâ

---

## üß™ –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏

1. **–í—ñ–¥–∫—Ä–∏–π DevTools:**
   - –ù–∞—Ç–∏—Å–Ω–∏ `F12`
   - –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Network**
   - –£ –ø–æ—à—É–∫—É –≤–≤–µ–¥–∏ `me`

2. **–ü–æ—Ö–æ–¥–∏ –ø–æ —Å–∞–π—Ç—É:**
   - –í—ñ–¥–∫—Ä–∏–π –∫—ñ–ª—å–∫–∞ —Å—Ç–æ—Ä—ñ–Ω–æ–∫
   - –ó–º—ñ–Ω—é–π —Ñ—ñ–ª—å—Ç—Ä–∏
   - –ü–µ—Ä–µ–≥–ª—è–¥–∞–π —Ç–æ–≤–∞—Ä–∏

3. **–ü–æ–¥–∏–≤–∏—Å—å –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - **–î–æ:** –ü–æ–±–∞—á–∏–≤ –±–∏ 10-50+ –∑–∞–ø–∏—Ç—ñ–≤ `GET /api/auth/me`
   - **–ü—ñ—Å–ª—è:** –ü–æ–±–∞—á–∏—à 1 –∑–∞–ø–∏—Ç (—Ä–µ—à—Ç–∞ –∑ –∫–µ—à—É)

---

## üí° –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

### –°—Ç—Ä–∞—Ç–µ–≥—ñ—è –∫–µ—à—É–≤–∞–Ω–Ω—è:

```
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å–∞–π—Ç
   ‚Üí –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ localStorage
   ‚Üí –ù–µ–º–∞—î –¥–∞–Ω–∏—Ö? ‚Üí –ó–∞–ø–∏—Ç –¥–æ /api/auth/me
   ‚Üí –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –≤ localStorage
   ‚Üí –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–µ—à

2. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ —ñ–Ω—à—É —Å—Ç–æ—Ä—ñ–Ω–∫—É
   ‚Üí –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ localStorage
   ‚Üí –Ñ –¥–∞–Ω—ñ! ‚Üí –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–µ—à
   ‚Üí –ù–µ–º–∞—î –∑–∞–ø–∏—Ç—É –¥–æ API ‚úÖ

3. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏—Ö–æ–¥–∏—Ç—å –∑ –∞–∫–∞—É–Ω—Ç—É
   ‚Üí –û—á–∏—â–∞—î–º–æ localStorage
   ‚Üí –ö–µ—à —ñ–Ω–≤–∞–ª—ñ–¥—É—î—Ç—å—Å—è
```

---

## üéØ –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è –¥–ª—è —Ç–µ–±–µ

### –¢–∏ –Ω—ñ—á–æ–≥–æ –Ω–µ –ø–æ–º—ñ—Ç–∏—à, –∫—Ä—ñ–º:
- ‚úÖ **–°–∞–π—Ç –ø—Ä–∞—Ü—é—î —à–≤–∏–¥—à–µ**
- ‚úÖ **–ù–µ–º–∞—î –ø—ñ–¥–≤–∏—Å–∞–Ω—å**
- ‚úÖ **–ü–ª–∞–≤–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è**
- ‚úÖ **–ú–µ–Ω—à–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä**

### –í—Å–µ –ø—Ä–∞—Ü—é—î —è–∫ —Ä–∞–Ω—ñ—à–µ:
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î
- ‚úÖ –†–µ–π—Ç–∏–Ω–≥–∏ –ø—Ä–∞—Ü—é—é—Ç—å
- ‚úÖ Admin –ø–∞–Ω–µ–ª—å –ø—Ä–∞—Ü—é—î
- ‚úÖ –î–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ñ

---

## üìÑ –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–í—ñ–¥–∫—Ä–∏–π **`PERFORMANCE_FIXES.md`** –¥–ª—è:
- –¢–µ—Ö–Ω—ñ—á–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π
- –ü—Ä–∏–∫–ª–∞–¥—ñ–≤ –∫–æ–¥—É
- –î–æ–¥–∞—Ç–∫–æ–≤–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
- Troubleshooting

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –Ω–∞ –º–∞–π–±—É—Ç–Ω—î

### –©–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –ø–æ–¥—ñ–±–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º:

1. **–ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π useEffect dependencies:**
   ```javascript
   // –ü–û–ì–ê–ù–û - —á–∞—Å—Ç–∏–π –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä
   useEffect(() => {
     fetchData();
   }, [prop1, prop2, prop3]); // –ó–º—ñ–Ω—é—é—Ç—å—Å—è —á–∞—Å—Ç–æ!
   
   // –î–û–ë–†–ï - —Ä—ñ–¥–∫–∏–π –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä
   useEffect(() => {
     fetchData();
   }, []); // –¢—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑
   ```

2. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –∫–µ—à—É–≤–∞–Ω–Ω—è –¥–ª—è –¥–∞–Ω–∏—Ö —â–æ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å—Å—è —á–∞—Å—Ç–æ:**
   - –î–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
   - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
   - –°—Ç–∞—Ç–∏—á–Ω—ñ —Å–ø–∏—Å–∫–∏ (–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó, –∫–æ–ª—å–æ—Ä–∏)

3. **Debounce –¥–ª—è –ø–æ—à—É–∫—É:**
   - –ù–µ —à—É–∫–∞–π –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –∫–ª–∞–≤—ñ—à—ñ
   - –ó–∞—á–µ–∫–∞–π 500ms –ø—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ –¥—Ä—É–∫—É–≤–∞—Ç–∏

4. **React Query –∞–±–æ SWR:**
   - –î–ª—è —Å–∫–ª–∞–¥–Ω—ñ—à–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∫–µ—à—É–≤–∞–Ω–Ω—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

---

**–¢–µ–ø–µ—Ä —Å–∞–π—Ç –º–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –Ω–∞–±–∞–≥–∞—Ç–æ —à–≤–∏–¥—à–µ! üéâ**

–Ø–∫—â–æ —â–µ —î –ø—ñ–¥–≤–∏—Å–∞–Ω–Ω—è - –¥–∞–π –∑–Ω–∞—Ç–∏, —è –ø–µ—Ä–µ–≤—ñ—Ä—é —ñ–Ω—à—ñ –º—ñ—Å—Ü—è!

